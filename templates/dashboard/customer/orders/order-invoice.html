{% extends 'dashboard/customer/base.html' %}
{% load static %}

{% block title %}{% block title-meta %}
    OrderDetail
{% endblock %}{% endblock %}

{% block main %}
<div class="main-panel">
  <div class="content-wrapper">
<div class="page-header">
  <h3 class="page-title text-primary">
<a class="page-title-icon bg-gradient-primary text-white me-2">
<i class="mdi mdi-security"></i>
</a> <a href="{% url 'dashboard:customer:home' %}" class="text-black">Home</a> <span class="text-black">/</span>  OrderDetail

  </h3>
</div>
            <div class="w-lg-85 mx-lg-auto">
                <!-- Card -->
                <div class="card card-lg mb-5">
                    <div class="card-body">
                        <div class="row justify-content-lg-between">


                            <div class="col-sm-auto  text-right mb-3">
                                <div class="mb-3">
                                    <h2>order id</h2>
                                    <span class="d-block">{{order.id}}</span>
                                </div>

                            </div>
                            <!-- End Col -->

                            <div class="col-sm-auto  mb-3">
                                <div class="mb-2">
                                    <img class="avatar" src="{% static 'panel/images/logo.svg' %}" alt="Logo">
                                </div>

                                <h1 class="h2 text-primary">ElectroCode</h1>
                            </div>
                            <!-- End Col -->

                        </div>
                        <!-- End Row -->

                        <div class="row justify-content-md-between mb-3">
                            <div class="col-md">
                                <dl class="row">
                                    <dt class="col-sm-8">customer name:</dt>
                                    <dd class="col-sm-4">{{object.user.user_profile.get_fullname}}</dd>
                                </dl>
                                <dl>
                                    <dt class="col-sm-4">address:</dt>
                                    <dd class="col-sm-8">{{object.get_full_address}}</dd>

                                </dl>
                            </div>
                            <!-- End Col -->

                            <div class="col-md text-md-end">
                                <dl class="row">
                                    <dt class="col-sm-8">order time:</dt>
                                    <dd class="col-sm-4">{{object.created_date|date:"Y-m-d h:i"}}</dd>
                             
                                </dl>
                            </div>
                            <!-- End Col -->
                        </div>
                        <!-- End Row -->

                        <!-- Table -->
                        <div class="table-responsive">
                            <table class="table table-borderless table-nowrap table-align-middle">
                                <thead class="thead-light">
                                    <tr>
                                        <th>#</th>
                                        <th>product id</th>
                                        <th>product</th>
                                        <th>number</th>
                                        <th class="table-text-end">price</th>
                                    </tr>
                                </thead>

                                <tbody>
                                    {% for order_item in object.order_items.all  %}
                                    <tr>
                                        <th>{{forloop.counter}}</th>
                                        <th>{{order_item.product.id}}</th>
                                        <th>{{order_item.product.title}}</th>
                                        <td>{{order_item.quantity}}</td>

                                        <td class="table-text-end formatted-price">{{order_item.price}}</td>
                                    </tr>
                                    {% endfor %}

                                </tbody>
                            </table>
                        </div>
                        <!-- End Table -->

                        <hr class="my-5">

                        <div class="row mb-3">
                            <div class="row mb-3">
                                <dt class="col-md-3">total price:</dt>
                                <dl class="col-md-3 formatted-price">{{object.total_price}}</dl>
                                {% if object.coupon %}
                                <dt class="col-md-3">discount:</dt>                                
                                <dl class="col-md-3 "> with {{object.coupon.discount_percent}} % discount </dl>
                                <dt class="col-md-3"> total price with discount:</dt>  
                                <dl class="col-md-3 formatted-price ">{{object.get_price}}</dl>
                                {% else %}
                                <dl class="col-md-3 ">discount</dl>
                                <dl class="col-md-3 ">0</dl>
                                {% endif %}

                            </div>
                            <!-- End Row -->

                        </div>
                        <!-- End Row -->


                    </div>
                </div>
                <!-- End Card -->

                <!-- Footer -->
                <div class="d-flex justify-content-end d-print-none gap-3">
                    <a class="btn btn-primary" href="javascript:;" onclick="window.print(); return false;">
                        <i class="bi-printer me-1"></i>چاپ فاکتور 
                    </a>
                </div>
                <!-- End Footer -->
            </div>
        </div>
</div>
{% endblock %}